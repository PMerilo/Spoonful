@page
@model Spoonful.Pages.Admin.VoucherManagement.IndexModel
@{
    ViewData["Title"] = "Vouchers";
}

<link href="https://cdn.jsdelivr.net/npm/simple-datatables@latest/dist/style.css" rel="stylesheet" type="text/css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<h1 class="display-4">@ViewData["Title"]</h1>
<div class="card" style="padding:10px">
    <div class="card-body">
    <table class="table table-striped" id="rewards-table">
        <thead>
        <tr>
            <th>@Html.DisplayNameFor(model => model.VoucherList[0].Id)</th>
            <th>@Html.DisplayNameFor(model => model.VoucherList[0].Name)</th>
            <th>@Html.DisplayNameFor(model => model.VoucherList[0].Description)</th>
            <th>@Html.DisplayNameFor(model => model.VoucherList[0].voucherCode)</th>
            <th>@Html.DisplayNameFor(model => model.VoucherList[0].discountAmount)</th>
            <th>@Html.DisplayNameFor(model => model.VoucherList[0].Quantity)</th>
            <th>@Html.DisplayNameFor(model => model.VoucherList[0].expiryDate)</th>
            <th></th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        @{
                @foreach (var item in Model.VoucherList)
            {
                    <tr>
                        <td>@item.Id</td>
                        <td>@item.Name</td>
                        <td>@item.Description</td>
                        <td>@item.voucherCode</td>
                        <td>@item.discountAmount</td>
                        <td>@item.Quantity</td>
                        <td>@item.expiryDate.ToShortDateString()</td>   
                        <td>
                            <a class="yellow-btn" asp-page="/Admin/VoucherManagement/Edit" asp-route-id="@item.Id">Edit</a>
                        </td>
                        <td>
                            <form class="mt-3" method="post">
                                <div asp-validation-summary="All" class="text-danger"></div>

                                <input class="form-control" asp-for="Voucher.Id" type="hidden" value="@item.Id"/>

                                <div>
                                    <input type="submit" value="Delete" class="danger-btn" />
                                </div>
                            </form> 
                        </td>
                    </tr>
            }
        }
        </tbody>
    </table>
    <button class="blue-btn" onclick="location.href='/Admin/VoucherManagement/Add'">Add Voucher</button>
    </div>
</div>     
</div>

@section Scripts
{
    <script>
      $(document).ready(function () {
        const rewards_table = document.getElementById('rewards-table');
        let rewardsTable = new simpleDatatables.DataTable(rewards_table);
      });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/simple-datatables@latest" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
    integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
    crossorigin="anonymous"></script>
}